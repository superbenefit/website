---
// Latest Activity Section Component
// Displays recent proposals, knowledge contributions, and community updates
// Uses placeholder content until Content Layer API is enabled

interface ActivityItem {
  id: string;
  type: 'proposal' | 'knowledge' | 'update';
  title: string;
  preview: string;
  date: string;
  readTime: string;
  url: string;
  isExternal?: boolean;
}

// Placeholder activity data - will be replaced with Content Layer API
const activities: ActivityItem[] = [
  {
    id: '1',
    type: 'proposal',
    title: 'Governance Framework 2.0 Implementation Proposal',
    preview: 'Introducing enhanced multi-signature workflows and streamlined proposal processes for improved community participation.',
    date: 'Dec 12, 2024',
    readTime: '4 min read',
    url: 'https://governance.superbenefit.org/proposals/governance-framework-2.0',
    isExternal: true
  },
  {
    id: '2',
    type: 'knowledge',
    title: 'Treasury Management Patterns for Regenerative DAOs',
    preview: 'A comprehensive guide to transparent fund allocation, milestone-based distributions, and community oversight.',
    date: 'Dec 10, 2024',
    readTime: '6 min read',
    url: 'https://knowledge.superbenefit.org/treasury-patterns',
    isExternal: true
  },
  {
    id: '3',
    type: 'update',
    title: 'Partnership with Giveth for Impact Measurement',
    preview: 'New collaboration to track and verify social impact outcomes across SuperBenefit-funded initiatives.',
    date: 'Dec 8, 2024',
    readTime: '3 min read',
    url: '/updates/giveth-partnership',
    isExternal: false
  },
  {
    id: '4',
    type: 'proposal',
    title: 'Q1 2025 Working Groups Formation',
    preview: 'Establishing three new working groups: Climate Action, Digital Rights, and Community Infrastructure.',
    date: 'Dec 5, 2024',
    readTime: '5 min read',
    url: 'https://governance.superbenefit.org/proposals/q1-working-groups',
    isExternal: true
  }
];

// Type-based styling and icons
const getTypeConfig = (type: ActivityItem['type']) => {
  switch (type) {
    case 'proposal':
      return {
        icon: 'ðŸ“œ',
        label: 'Proposal',
        colorClass: 'text-sb-sage border-sb-sage/20 bg-sb-sage/5'
      };
    case 'knowledge':
      return {
        icon: 'ðŸ“š',
        label: 'Knowledge',
        colorClass: 'text-sb-orange border-sb-orange/20 bg-sb-orange/5'
      };
    case 'update':
      return {
        icon: 'ðŸŒ±',
        label: 'Update',
        colorClass: 'text-sb-rust border-sb-rust/20 bg-sb-rust/5'
      };
  }
};
---

<section class="py-16 lg:py-24 bg-gradient-to-b from-sb-cream/30 to-white">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center max-w-3xl mx-auto mb-12 lg:mb-16">
      <p class="text-sb-sage font-medium text-sm sm:text-base tracking-wide uppercase mb-4">
        Stay Updated
      </p>
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-sb-charcoal mb-6 leading-tight">
        Latest from the Network
      </h2>
      <p class="text-lg sm:text-xl text-gray-600 leading-relaxed">
        Recent proposals, knowledge contributions, and community updates from across the SuperBenefit ecosystem.
      </p>
    </div>

    <!-- Activity Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8 mb-12">
      {activities.map((activity, index) => {
        const config = getTypeConfig(activity.type);
        return (
          <article 
            class="activity-card group bg-white rounded-2xl border border-gray-200 p-6 lg:p-8 transition-all duration-300 hover:shadow-xl hover:scale-[1.02] hover:-translate-y-1"
            style={`animation-delay: ${index * 100}ms`}
          >
            <!-- Activity Header -->
            <div class="flex items-start gap-4 mb-4">
              <div class={`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium border ${config.colorClass}`}>
                <span class="text-base" role="img" aria-label={config.label}>
                  {config.icon}
                </span>
                {config.label}
              </div>
              {activity.isExternal && (
                <svg 
                  class="w-4 h-4 text-gray-400 mt-1" 
                  fill="none" 
                  stroke="currentColor" 
                  viewBox="0 0 24 24"
                  aria-label="External link"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                </svg>
              )}
            </div>

            <!-- Activity Content -->
            <div class="mb-4">
              <h3 class="text-xl lg:text-2xl font-bold text-sb-charcoal mb-3 leading-tight group-hover:text-sb-sage transition-colors duration-200">
                {activity.title}
              </h3>
              <p class="text-gray-600 leading-relaxed mb-4">
                {activity.preview}
              </p>
            </div>

            <!-- Activity Metadata -->
            <div class="flex items-center justify-between">
              <div class="text-sm text-gray-500">
                {activity.date} â€¢ {config.label} â€¢ {activity.readTime}
              </div>
              <a 
                href={activity.url}
                class="inline-flex items-center gap-2 text-sb-sage font-medium hover:text-sb-sage/80 transition-colors duration-200"
                target={activity.isExternal ? '_blank' : undefined}
                rel={activity.isExternal ? 'noopener noreferrer' : undefined}
              >
                Read More
                <svg class="w-4 h-4 transition-transform duration-200 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            </div>
          </article>
        );
      })}
    </div>

    <!-- View All Activity CTA -->
    <div class="text-center">
      <a 
        href="https://governance.superbenefit.org" 
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-3 bg-sb-sage text-white font-semibold px-8 py-4 rounded-full hover:bg-sb-sage/90 transition-all duration-300 hover:scale-105 hover:shadow-lg text-lg"
      >
        See All Activity in the Forum
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
      </a>
    </div>
  </div>
</section>

<style>
  .activity-card {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease-out forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Organic hover effects */
  .activity-card:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(127, 165, 104, 0.1);
  }

  /* Enhance focus states for accessibility */
  .activity-card:focus-within {
    outline: 2px solid var(--sb-sage);
    outline-offset: 2px;
  }

  /* Progressive enhancement for motion */
  @media (prefers-reduced-motion: reduce) {
    .activity-card {
      animation: none;
      opacity: 1;
      transform: none;
    }
    
    .activity-card:hover {
      transform: none;
      scale: none;
    }
  }
</style>